<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×©×œ×‘ 5 â€” ×”×¤×¨×•××¤×˜ ×©×œ×š ××•×›×Ÿ!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Heebo', 'system-ui', 'sans-serif'],
          },
        },
      },
    }
  </script>
  <style>
    html { font-family: 'Heebo', system-ui, sans-serif; }
    :root { --accent: #7c3aed; --accentHover: #6d28d9; }
    .accent-text { color: var(--accent); }
    .btn-accent { background: var(--accent); }
    .btn-accent:hover { background: var(--accentHover); }
    .accent-ring:focus { box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 35%, transparent); }
  </style>
</head>
<body class="min-h-screen bg-gray-50 flex items-center justify-center p-4 font-sans">
  <main class="w-full max-w-3xl">
    <!-- Step indicator -->
    <div class="mb-6">
      <span class="inline-block px-4 py-2 rounded-xl bg-purple-100 text-purple-700 font-medium text-sm">
        ×©×œ×‘ 5 ××ª×•×š 5 - ×”×¤×¨×•××¤×˜ ×©×œ×š ××•×›×Ÿ!
      </span>
    </div>

    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8">
      <div class="flex items-start justify-between gap-4 flex-row-reverse">
        <div class="flex-1">
          <h1 class="text-2xl md:text-3xl font-bold text-gray-900 text-right leading-tight">
            ×”×¤×¨×•××¤×˜ ×”××•×©×œ× ×œ×¡×•×›×Ÿ ×©×œ×š
          </h1>
          <p class="mt-2 text-gray-600 text-right">
            ×”×¢×ª×§/×™ ××ª ×”×˜×§×¡×˜ ×”×‘× ×•×”×“×‘×§/×™ ×‘-ChatGPT ××• Claude. ×”×›×œ × ×‘× ×” ××•×˜×•××˜×™×ª ××”××™×“×¢ ×©××™×œ××ª.
          </p>
        </div>
        <div class="flex-shrink-0">
          <div class="w-12 h-12 rounded-2xl bg-gray-50 flex items-center justify-center border border-gray-100">
            <span class="text-2xl" aria-hidden="true">ğŸ¯</span>
          </div>
        </div>
      </div>

      <!-- Prompt code block -->
      <div class="mt-6">
        <div class="flex items-center justify-between gap-3 mb-2 flex-row-reverse">
          <p class="text-sm font-medium text-gray-700 text-right">
            ×”×¤×¨×•××¤×˜ ×©×œ×š
          </p>
          <p id="persona-badge" class="text-xs font-medium px-3 py-1 rounded-full bg-gray-100 text-gray-700">
            â€”
          </p>
        </div>

        <pre class="w-full rounded-2xl bg-slate-900 text-slate-100 p-4 md:p-5 overflow-auto text-sm leading-6 border border-slate-800"><code id="prompt-box">×˜×•×¢×Ÿ ×¤×¨×•××¤×˜...</code></pre>

        <div class="mt-4 flex flex-col md:flex-row gap-3">
          <button
            id="copy-btn"
            type="button"
            class="btn-accent w-full md:w-auto px-6 py-3 text-base font-bold text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"
          >
            ×”×¢×ª×§ ×¤×¨×•××¤×˜
          </button>
          <button
            id="restart-btn"
            type="button"
            class="w-full md:w-auto px-6 py-3 text-base font-semibold rounded-full border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300"
          >
            ×”×ª×—×œ ××—×“×©
          </button>
          <a
            href="step4.html"
            class="w-full md:w-auto px-6 py-3 text-base font-semibold rounded-full text-purple-700 hover:underline text-center"
          >
            â† ×—×–×¨×” ×œ×©×œ×‘ 4
          </a>
        </div>

        <p class="mt-4 text-xs text-gray-500 text-right">
          ×˜×™×¤: ×”××™×“×¢ × ×©××¨ ×‘-localStorage ×‘×“×¤×“×¤×Ÿ, ×›×š ×©××¤×©×¨ ×œ×—×–×•×¨ ××—×•×¨×” ×‘×œ×™ ×œ××‘×“ ×¤×¨×˜×™×.
        </p>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-5 left-1/2 -translate-x-1/2 hidden">
      <div class="px-4 py-2 rounded-full bg-gray-900 text-white text-sm shadow-lg">
        ×”×•×¢×ª×§ ×œ×œ×•×—
      </div>
    </div>
  </main>

  <script>
    const $ = (id) => document.getElementById(id);
    const get = (key) => (localStorage.getItem(key) || '').trim();

    const personaId = get('selectedPersonality');
    const personaName = get('selectedPersonalityName') || '×”×“××•×ª ×©×‘×—×¨×ª';

    // Optional: accent by personality
    const colors = {
      walter_white: { accent: '#10b981', hover: '#059669' }, // emerald
      don_draper: { accent: '#f59e0b', hover: '#d97706' },   // amber
      michael_scott: { accent: '#3b82f6', hover: '#2563eb' }, // blue
      ross_geller: { accent: '#14b8a6', hover: '#0d9488' },  // teal
      default: { accent: '#7c3aed', hover: '#6d28d9' }       // purple
    };
    const theme = colors[personaId] || colors.default;
    document.documentElement.style.setProperty('--accent', theme.accent);
    document.documentElement.style.setProperty('--accentHover', theme.hover);

    const name = get('userName') || 'â€”';
    const genderRaw = get('userGender');
    const genderHeb = genderRaw === 'female' ? '× ×§×‘×”' : genderRaw === 'male' ? '×–×›×¨' : 'â€”';
    const role = get('userRole') || 'â€”';
    const audience = get('userAudience') || 'â€”';
    const types = get('userPresentationTypes') || 'â€”';
    const topic = get('presentationTopic') || 'â€”';
    const goal = get('presentationGoal') || 'â€”';

    const prompt = [
      `×©×œ×•×, ×× ×™ ${name}.`,
      `×× ×™ ×¢×•×‘×“/×ª ×‘×ª×•×¨ ${role} ×•××¦×™×’/×” ×‘×“\"×› ×œ${audience}.`,
      `×”××™×©×™×•×ª ×©×‘×—×¨×ª×™ ×”×™× ${personaName}.`,
      ``,
      `×× ×™ ×¨×•×¦×” ×©×ª×¢×–×•×¨ ×œ×™ ×œ×‘× ×•×ª ××¦×’×ª ×‘× ×•×©×: ${topic}`,
      `×©×”××˜×¨×” ×”×›×™ ×—×©×•×‘×” ×©×œ×” ×”×™×: ${goal}`,
      ``,
      `×¡×•×’×™ ××¦×’×•×ª × ×¤×•×¦×™× ××¦×œ×™: ${types}`,
      ``,
      `×”× ×—×™×•×ª ×¢×‘×•×“×”:`,
      `- ×“×‘×¨/×™ ××™×ª×™ ×‘×¡×’× ×•×Ÿ ×©×œ ${personaName}.`,
      `- ×”×©×ª××©/×™ ×‘×œ×©×•×Ÿ ${genderHeb}.`,
      `- ×ª×Ÿ/×™ ××‘× ×” ×©×§×•×¤×™×•×ª ××•××œ×¥, ×›×•×ª×¨×•×ª ×œ×›×œ ×©×§×£, ×ª×•×›×Ÿ ×§×¦×¨ ×•×‘×¨×•×¨, ×•-speaker notes ×œ×›×œ ×©×§×£.`,
      `- ×©××œ/×™ ×¢×“ 3 ×©××œ×•×ª ×”×‘×”×¨×” ×¨×§ ×× ××™×“×¢ ×§×¨×™×˜×™ ×—×¡×¨.`,
    ].join('\\n');

    $('prompt-box').textContent = prompt;
    $('persona-badge').textContent = `××™×©×™×•×ª: ${personaName}`;

    function showToast(text) {
      const toast = $('toast');
      toast.querySelector('div').textContent = text;
      toast.classList.remove('hidden');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toast.classList.add('hidden'), 1400);
    }

    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (_) {
        // Fallback
        try {
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.setAttribute('readonly', '');
          ta.style.position = 'fixed';
          ta.style.top = '-1000px';
          document.body.appendChild(ta);
          ta.select();
          const ok = document.execCommand('copy');
          document.body.removeChild(ta);
          return ok;
        } catch (_) {
          return false;
        }
      }
    }

    $('copy-btn').addEventListener('click', async () => {
      const ok = await copyToClipboard(prompt);
      showToast(ok ? '×”×•×¢×ª×§ ×œ×œ×•×—' : '×œ× ×”×¦×œ×—×ª×™ ×œ×”×¢×ª×™×§ â€” × ×¡×• ×™×“× ×™×ª');
    });

    $('restart-btn').addEventListener('click', () => {
      localStorage.clear();
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
